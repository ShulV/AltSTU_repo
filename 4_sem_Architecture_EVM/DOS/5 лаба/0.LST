    1  00  00                      ; программа вычисляет Y:= F(X,Y) + F(Y,X) - F(2,3)
    2  00  b8  0a  jmp begin                ;
    3  02  00      .org 2                        ; программные прерывания
    4  02  70      .db 70                        ;
    5  03  00      .org 3                        ;
    6  03  80      .db 80                        ;
    8  04  00      .org 8                        ;зарезервировать соответствующие
    9  08  a5      .db 0A5                        ;ячейки для аппаратных прерываний
   10  09  00      .org 9                        ;
   11  09  e0      .db 0E0
   15  0a  30  28  begin: mvi a,X                        ;
   16  0c  d2      int 2                         ; Программное прерывание на ввод
   17  0d  00                      ; ПОСЧЁТ Y
   18  0d  10  28  load a,X                ;
   19  0f  11  29  load b,Y                ;
   20  11  c0  2a  call FUNC                ; вызов функции и подсчёт F(X,Y)
   21  13  20      push a                        ; положить F(X,Y) в стек из rA
   22  14  10  29  load a,Y                ; скопировать содержимое о адресу Y в rA
   23  16  11  28  load b,X                ; скопировать содержимое о адресу X в rB 
   24  18  c0  2a  call FUNC                ; вызов функции и подсчёт F(Y,X)
   25  1a  29      pop b                        ; вытянуть F(X,Y) из стека в rB
   26  1b  51      OLDP: adr a,b                ; сложение F(Y,X)+F(X,Y) (rA + rB, рез. в rA)
   27  1c  20      push a                        ; положить F(Y,X)+F(X,Y) в стек из rA
   28  1d  30  02  mvi a,2                        ; непосредственная загрузка 2 в rA
   29  1f  31  03  mvi b,3                        ; непосредственная загрузка 3 в rB 
   30  21  c0  2a  call FUNC                ; вызов функции и подсчёт F(Y,X)
   31  23  29      pop b                        ; вытянуть F(Y,X)+F(X,Y) из стека в rB
   32  24  38      xchg                        ; обмен регистров (rA и rB обмениваются содержимым)
   33  25  69      OLDM: sbr a,b                ; [F(Y,X)+F(X,Y)] - F(2,3), рез. в rA
   34  26  d3      int 3                         ; Программное прерывание на вывод
   35  27  f8      stop                        ; останов
   36  28  00      X: .ds 1                ; резервир. 1 байта под массив X
   37  29  00      Y: .ds 1                ; резервир. 1 байта под массив Y
   39  2a  00                      ; подпрограмма вычисления F(A,B)= (B*B-1) + (A+B)*(A+B)
   40  2a  00                      ; вход: (rA) - A; (rB) - B
   41  2a  00                      ; выход: (rA) - (B*B-1) + (A+B)*(A+B)
   42  2a  21      FUNC: push b                ; положить B из rB в стек 
   43  2b  51      adr a,b                        ; сложение регистров (rA + rB, рез. в rA)
   44  2c  38      xchg                        ; обмен rA и rB содержимым (A+B в rB)
   45  2d  81      mur a,b                        ; умножение (A+B)^2 ((A+B) в R+1 т.е. в rB
   46  2e  00                              ; умножается на (A+B) в rB) рез. - в паре рег.
   47  2e  28      pop a                        ; вытянуть B из стека в rA
   48  2f  21      push b                        ; положить (A+B)^2 в стек
   49  30  38      xchg                        ; обмен rA и rB содержимым (A+B в rB)
   50  31  81      mur a,b                        ; умножение B*B (B в R+1 т.е. в rB
   51  32  00                              ; умножается на B в rB) рез. - в паре рег.
   52  32  79  01  sbi b,1                        ; B*B-1 (непосред. вычит. rB-1) рез. в rB
   53  34  28      pop a                        ; вытянуть (A+B)^2 из стека
   54  35  51      adr a,b                        ; [B*B-1]+[(A+B)^2] (rA+rB, рез. в rA)
   55  36  c8      ret                        ; возврат в вызывающую программу
   57  37  00                              ; 1 программное прерывание (Вызов - int 2)
   58  37  00                              ; 0(b) - адрес X
   59  37  00                              ; 1(b) - адрес Y
   60  37  00      .org 70                        ; устан. Знач. счетчика адр. команд равным абс. 
   61  70  f0      di                         ; Запретить прерывания
   62  71  21      push b                         ; Сохранить состояние rB
   63  72  0a      mov b, a                ;
   64  73  40      in 0                         ; Ввод X
   65  74  1c  40  stor a, 0(b)                 ; Запомнить X по адресу X
   66  76  41      in 1                         ; Ввод Y
   67  77  1c  41  stor a, 1(b)                 ; Запомнить В по адресу Y
   68  79  29      pop b                        ; Восстановить состояние rA
   70  7a  e8      ei                         ; Разрешить прерывания
   71  7b  d8      rin                         ; Возврат из прерывания
   73  7c  00                              ; 2 программное прерывание (Вызов - int 3)
   74  7c  00      .org 80                 ; устан. Знач. счетчика адр. команд равным абс. адресу 
   75  80  f0      di                         ; Запретить прерывания
   76  81  4a      out 2                        ; вывести в канал 2
   77  82  e8      ei                         ; Разрешить прерывания
   78  83  d8      rin                         ; Возврат из прерывания
   81  84  00                              ; апп. прерывание №1
   82  84  00                              ; изменение знаков “-” на “+”  и “+” на “-” в алгоритме
   83  84  00                              ; и рестарт программы с очисткой стека и рабочих переме
   84  84  00      .org 0A5                ;
   85  a5  f0      di                         ; Запретить прерывания
   86  a6  10  00  load a,X                ;
   88  a8  e8      ei                         ; Разрешить прерывания
   89  a9  d8      rin                         ; Выход из прерывания
   91  aa  00                              ; апп. прерывание №2
   92  aa  00      .org 0E0                ;
   93  e0  f0      di                         ; Запретить прерывания
   96  e1  e8      ei                         ; Разрешить прерывания
   97  e2  d8      rin                         ; Выход из прерывания

    ***** ’ Ў«Ёж  ЇҐаҐЄаҐбв­ле ббл«®Є *****
  Ё¬п     ®ЇаҐ¤Ґ«Ґ­ЁҐ     ббл«ЄЁ

 Y        29              15  10                                               
  ****  X        *­Ґ®ЇаҐ¤Ґ«Ґ­®   a7                                                   
 X        28              17  e   b                                            
 OLDP     1b                                                                   
 OLDM     25                                                                   
 FUNC     2a              22  19  12                                           
 BEGIN    a               1                                                    

  **** Ќ ©¤Ґ­л ®иЁЎЄЁ. Љ®¤ ­Ґ бЈҐ­ҐаЁа®ў ­!***

