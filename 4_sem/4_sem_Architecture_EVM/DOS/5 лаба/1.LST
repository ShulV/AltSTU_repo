    1  00  00                      ; программа вычисляет Y:= F(X,Y) + F(Y,X) - F(2,3)
    2  00  00                              ; Векторы программных прерываний
    3  00  70      .db 70                        ;
    4  01  80      .db 80                        ;
    5  02  00      .org 08                 ;
    6  08  00                              ; Векторы аппаратных прерываний
    7  08  b0      .db 0b0                        ;
    9  09  00      .org 10                 ;
   11  10  d0      int 0                         ; Программное прерывание на ввод
   12  11  00                      ; ПОСЧЁТ Y
   13  11  c0  2a  call FUNC                ; вызов функции и подсчёт F(X,Y)
   14  13  20      push a                        ; положить F(X,Y) в стек из rA
   15  14  10  29  load a,Y                ; скопировать содержимое о адресу Y в rA
   16  16  11  28  load b,X                ; скопировать содержимое о адресу X в rB 
   17  18  c0  2a  call FUNC                ; вызов функции и подсчёт F(Y,X)
   18  1a  29      pop b                        ; вытянуть F(X,Y) из стека в rB
   19  1b  51      OLDP: adr a,b                ; сложение F(Y,X)+F(X,Y) (rA + rB, рез. в rA)
   20  1c  20      push a                        ; положить F(Y,X)+F(X,Y) в стек из rA
   21  1d  30  02  mvi a,2                        ; непосредственная загрузка 2 в rA
   22  1f  31  03  mvi b,3                        ; непосредственная загрузка 3 в rB 
   23  21  c0  2a  call FUNC                ; вызов функции и подсчёт F(Y,X)
   24  23  29      pop b                        ; вытянуть F(Y,X)+F(X,Y) из стека в rB
   25  24  38      xchg                        ; обмен регистров (rA и rB обмениваются содержимым)
   26  25  69      OLDM: sbr a,b                ; [F(Y,X)+F(X,Y)] - F(2,3), рез. в rA
   27  26  d1      int 1                         ; Программное прерывание на вывод
   29  27  f8      stop                        ; останов
   30  28  00      X: .ds 1                ; резервир. 1 байта под массив X
   31  29  00      Y: .ds 1                ; резервир. 1 байта под массив Y
   33  2a  00                      ; подпрограмма вычисления F(A,B)= (B*B-1) + (A+B)*(A+B)
   34  2a  00                      ; вход: (rA) - A; (rB) - B
   35  2a  00                      ; выход: (rA) - (B*B-1) + (A+B)*(A+B)
   36  2a  21      FUNC: push b                ; положить B из rB в стек 
   37  2b  51      adr a,b                        ; сложение регистров (rA + rB, рез. в rA)
   38  2c  38      xchg                        ; обмен rA и rB содержимым (A+B в rB)
   39  2d  81      mur a,b                        ; умножение (A+B)^2 ((A+B) в R+1 т.е. в rB
   40  2e  00                              ; умножается на (A+B) в rB) рез. - в паре рег.
   41  2e  28      pop a                        ; вытянуть B из стека в rA
   42  2f  21      push b                        ; положить (A+B)^2 в стек
   43  30  38      xchg                        ; обмен rA и rB содержимым (A+B в rB)
   44  31  81      mur a,b                        ; умножение B*B (B в R+1 т.е. в rB
   45  32  00                              ; умножается на B в rB) рез. - в паре рег.
   46  32  79  01  sbi b,1                        ; B*B-1 (непосред. вычит. rB-1) рез. в rB
   47  34  28      pop a                        ; вытянуть (A+B)^2 из стека
   48  35  51      adr a,b                        ; [B*B-1]+[(A+B)^2] (rA+rB, рез. в rA)
   49  36  c8      ret                        ; возврат в вызывающую программу
   51  37  00                              ; Программное прерывание на ввод
   52  37  00                      ; ЗАПИСЬ X,Y
   53  37  00      .org 70                        ; устан. Знач. счетчика адр. команд равным абс. 
   54  70  f0      di                         ; Запретить прерывания
   55  71  40      in 0                        ; ввод X (содерж. порта 0 заносится в rA)
   56  72  0a      mov b,a                        ; пересылка регистров (содержимое rA копир. в rB
   57  73  41      in 1                        ; ввод Y (содерж. порта 1 заносится в rA)
   58  74  38      xchg                        ; обмен регистров (rA и rB обмениваются содержимым)
   59  75  18  28  stor a,X                ; запись rA в X (содерж. rA копир. по абс. адр. X)
   60  77  19  29  stor b,Y                ; запись rB в Y (содерж. rB копир. по абс. адр. Y)
   61  79  e8      ei                         ; Разрешить прерывания
   62  7a  d8      rin                         ; Возврат из прерывания
   64  7b  00                              ; Программное прерывание на вывод
   65  7b  00      .org 80                 ; устан. Знач. счетчика адр. команд равным абс. адресу 
   66  80  f0      di                         ; Запретить прерывания
   67  81  4a      out 2                        ; вывести в канал 2
   68  82  e8      ei                         ; Разрешить прерывания
   69  83  d8      rin                         ; Возврат из прерывания
   72  84  00                              ; апп. прерывание №1
   73  84  00                              ; изменение знаков “-” на “+”  и “+” на “-” в алгоритме
   74  84  00                              ; и рестарт программы с очисткой стека и рабочих переме
   75  84  00      .org 0b0                ;
   76  b0  f0      di                         ; Запретить прерывания
   79  b1  e8      ei                         ; Разрешить прерывания
   80  b2  d8      rin                         ; Выход из прерывания

    ***** ’ Ў«Ёж  ЇҐаҐЄаҐбв­ле ббл«®Є *****
  Ё¬п     ®ЇаҐ¤Ґ«Ґ­ЁҐ     ббл«ЄЁ

 Y        29              78  15                                               
 X        28              76  17                                               
 OLDP     1b                                                                   
 OLDM     25                                                                   
 FUNC     2a              22  19  12                                           

  **** ЌҐ ®Ў­ аг¦Ґ­® ®иЁЎ®Є. “бЇҐи­®Ґ § ўҐаиҐ­ЁҐ ****

